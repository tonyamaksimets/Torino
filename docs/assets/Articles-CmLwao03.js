import{_ as E,J as X,c as g,z as w,x as I,j as s,G as q,y as B,P as H,D as F,H as M,Q,E as k,N as Y,a3 as Z,t as O,a4 as ee,g as ae,p as te,a5 as le,a6 as ie,u as ne,a7 as se,a as re,s as ue,$ as D,e as oe,a8 as A,X as x,i as ce,a9 as ve,aa as de,k as fe,ab as ge,a0 as be,ac as ye,a1 as me,n as pe,ad as he,o as C,ae as z,af as T,T as V,F as U,A as _e,v as xe}from"./index-DW0lKt0u.js";const ke={class:"article"},Pe={style:{opacity:"0.6","font-size":"1rem"}},Le={name:"ArticleCard"},Ve=Object.assign(Le,{props:{article:{type:Object,default(){return{}}}},setup(e){const{emit:m}=Z(),l=X(),b=e,t=g(()=>l.state.currentUser),u=g(()=>{var o;return(o=t.value)==null?void 0:o.favourite.find(r=>r.article==b.article.article)}),p=g(()=>{var o;return(o=t.value)==null?void 0:o.cart.find(r=>r.article==b.article.article)}),f=o=>{if(!t.value){m("openAuthModal");return}p.value?l.state.currentUser.cart=l.state.currentUser.cart.filter(r=>r.article!==b.article.article):l.state.currentUser.cart.push(o),p.value=!p.value},S=o=>{if(!t.value){m("openAuthModal");return}u.value?l.state.currentUser.favourite=l.state.currentUser.favourite.filter(r=>r.article!==b.article.article):l.state.currentUser.favourite.push(o),u.value=!u.value};return(o,r)=>(I(),w("div",ke,[s(q,{cover:"",height:"auto",width:"100%",src:e.article.image},null,8,["src"]),s(Y,{variant:"text"},{default:B(()=>[s(H,{style:{padding:"0","font-size":"1rem","white-space":"pre"}},{default:B(()=>[F("span",null,M(`${e.article.price} ₽   `),1),F("span",Pe,M(e.article.description),1)]),_:1}),s(Q,{style:{padding:"0","min-height":"0"}},{default:B(()=>[s(k,{color:"var(--primary-color)",text:p.value?"Удалить из корзины":"Добавить в корзину",variant:"tonal",density:"compact",onClick:r[0]||(r[0]=$=>f(e.article))},null,8,["text"])]),_:1})]),_:1}),s(k,{class:"article__icon",variant:"text",size:"small",density:"compact",icon:"mdi-heart",color:u.value?"var(--primary-color)":"",onClick:r[1]||(r[1]=$=>S(e.article))},null,8,["color"])]))}}),Ae=E(Ve,[["__scopeId","data-v-9f7c2c24"]]);function Ce(){const e=O([]);ee(()=>e.value=[]);function m(l,b){e.value[b]=l}return{refs:e,updateRef:m}}const Ie=te({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:C,default:"$first"},prevIcon:{type:C,default:"$prev"},nextIcon:{type:C,default:"$next"},lastIcon:{type:C,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...he(),...pe(),...me(),...ye(),...be(),...ge(),...fe({tag:"nav"}),...de(),...ve({variant:"text"})},"VPagination"),Se=ae()({name:"VPagination",props:Ie(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,m){let{slots:l,emit:b}=m;const t=le(e,"modelValue"),{t:u,n:p}=ie(),{isRtl:f}=ne(),{themeClasses:S}=se(e),{width:o}=re(),r=ue(-1);D(void 0,{scoped:!0});const{resizeRef:$}=oe(a=>{if(!a.length)return;const{target:i,contentRect:n}=a[0],d=i.querySelector(".v-pagination__list > *");if(!d)return;const y=n.width,L=d.offsetWidth+parseFloat(getComputedStyle(d).marginRight)*2;r.value=R(y,L)}),c=g(()=>parseInt(e.length,10)),v=g(()=>parseInt(e.start,10)),h=g(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):r.value>=0?r.value:R(o.value,58));function R(a,i){const n=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((a-i*n)/i).toFixed(2)))}const j=g(()=>{if(c.value<=0||isNaN(c.value)||c.value>Number.MAX_SAFE_INTEGER)return[];if(h.value<=0)return[];if(h.value===1)return[t.value];if(c.value<=h.value)return A(c.value,v.value);const a=h.value%2===0,i=a?h.value/2:Math.floor(h.value/2),n=a?i:i+1,d=c.value-i;if(n-t.value>=0)return[...A(Math.max(1,h.value-1),v.value),e.ellipsis,c.value];if(t.value-d>=(a?1:0)){const y=h.value-1,L=c.value-y+v.value;return[v.value,e.ellipsis,...A(y,L)]}else{const y=Math.max(1,h.value-2),L=y===1?t.value:t.value-Math.ceil(y/2)+v.value;return[v.value,e.ellipsis,...A(y,L),e.ellipsis,c.value]}});function P(a,i,n){a.preventDefault(),t.value=i,n&&b(n,i)}const{refs:J,updateRef:G}=Ce();D({VPaginationBtn:{color:x(e,"color"),border:x(e,"border"),density:x(e,"density"),size:x(e,"size"),variant:x(e,"variant"),rounded:x(e,"rounded"),elevation:x(e,"elevation")}});const K=g(()=>j.value.map((a,i)=>{const n=d=>G(d,i);if(typeof a=="string")return{isActive:!1,key:`ellipsis-${i}`,page:a,props:{ref:n,ellipsis:!0,icon:!0,disabled:!0}};{const d=a===t.value;return{isActive:d,key:a,page:p(a),props:{ref:n,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:d?e.activeColor:e.color,"aria-current":d,"aria-label":u(d?e.currentPageAriaLabel:e.pageAriaLabel,a),onClick:y=>P(y,a)}}}})),_=g(()=>{const a=!!e.disabled||t.value<=v.value,i=!!e.disabled||t.value>=v.value+c.value-1;return{first:e.showFirstLastPage?{icon:f.value?e.lastIcon:e.firstIcon,onClick:n=>P(n,v.value,"first"),disabled:a,"aria-label":u(e.firstAriaLabel),"aria-disabled":a}:void 0,prev:{icon:f.value?e.nextIcon:e.prevIcon,onClick:n=>P(n,t.value-1,"prev"),disabled:a,"aria-label":u(e.previousAriaLabel),"aria-disabled":a},next:{icon:f.value?e.prevIcon:e.nextIcon,onClick:n=>P(n,t.value+1,"next"),disabled:i,"aria-label":u(e.nextAriaLabel),"aria-disabled":i},last:e.showFirstLastPage?{icon:f.value?e.firstIcon:e.lastIcon,onClick:n=>P(n,v.value+c.value-1,"last"),disabled:i,"aria-label":u(e.lastAriaLabel),"aria-disabled":i}:void 0}});function N(){var i;const a=t.value-v.value;(i=J.value[a])==null||i.$el.focus()}function W(a){a.key===z.left&&!e.disabled&&t.value>+e.start?(t.value=t.value-1,T(N)):a.key===z.right&&!e.disabled&&t.value<v.value+c.value-1&&(t.value=t.value+1,T(N))}return ce(()=>s(e.tag,{ref:$,class:["v-pagination",S.value,e.class],style:e.style,role:"navigation","aria-label":u(e.ariaLabel),onKeydown:W,"data-test":"v-pagination-root"},{default:()=>[s("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&s("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[l.first?l.first(_.value.first):s(k,V({_as:"VPaginationBtn"},_.value.first),null)]),s("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[l.prev?l.prev(_.value.prev):s(k,V({_as:"VPaginationBtn"},_.value.prev),null)]),K.value.map((a,i)=>s("li",{key:a.key,class:["v-pagination__item",{"v-pagination__item--is-active":a.isActive}],"data-test":"v-pagination-item"},[l.item?l.item(a):s(k,V({_as:"VPaginationBtn"},a.props),{default:()=>[a.page]})])),s("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[l.next?l.next(_.value.next):s(k,V({_as:"VPaginationBtn"},_.value.next),null)]),e.showFirstLastPage&&s("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[l.last?l.last(_.value.last):s(k,V({_as:"VPaginationBtn"},_.value.last),null)])])]})),{}}}),$e={class:"articles"},Be={name:"Articles"},we=Object.assign(Be,{props:{articles:{type:Array,default(){return{}}}},setup(e){const m=e,l=O(1),b=g(()=>Math.ceil(m.articles.length/6)),t=g(()=>JSON.parse(JSON.stringify(m.articles)).splice((l.value-1)*6,6));return(u,p)=>(I(),w(U,null,[F("div",$e,[(I(!0),w(U,null,_e(t.value,f=>(I(),xe(Ae,{key:f.article,article:f,class:"articles__article"},null,8,["article"]))),128))]),s(Se,{modelValue:l.value,"onUpdate:modelValue":p[0]||(p[0]=f=>l.value=f),length:b.value,color:"var(--primary-color)"},null,8,["modelValue","length"])],64))}}),Re=E(we,[["__scopeId","data-v-0f3edfbb"]]);export{Re as A};
