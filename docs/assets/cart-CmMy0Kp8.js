import{_ as $,J as h,c as f,z as p,x as n,D as o,j as t,G as b,y as l,P as v,H as y,Q as k,E as x,N as V,v as _,K as g,F as C,A as j}from"./index-rj3NXZUd.js";import{V as U}from"./VDivider-BJsIwurK.js";const A={style:{margin:"0 10px"}},B={class:"article"},F={style:{opacity:"0.6","font-size":"1rem"}},z={name:"CartArticleCard"},D=Object.assign(z,{props:{article:{type:Object,default(){return{}}}},setup(s){const r=h(),c=s,m=f(()=>r.state.currentUser),u=f(()=>{var i;return(i=m.value)==null?void 0:i.favourite.find(e=>e.article==c.article.article)}),a=i=>{r.state.currentUser.cart=r.state.currentUser.cart.filter(e=>e.article!==c.article.article)},d=i=>{u.value||r.state.currentUser.favourite.push(i),r.state.currentUser.cart=r.state.currentUser.cart.filter(e=>e.article!==c.article.article)};return(i,e)=>(n(),p("div",A,[o("div",B,[t(b,{cover:"",height:"150px",width:"150px",src:s.article.image,style:{"flex-grow":"0"}},null,8,["src"]),t(V,{variant:"text"},{default:l(()=>[t(v,{style:{padding:"20px 0 20px","font-size":"1rem","white-space":"pre"}},{default:l(()=>[o("span",null,y(`${s.article.price} ₽   `),1),o("span",F,y(s.article.description),1)]),_:1}),t(k,{style:{"flex-direction":"column",padding:"0","min-height":"0"}},{default:l(()=>[t(x,{width:"180px",color:"var(--primary-color)",text:"Отложить",variant:"tonal",density:"compact",onClick:e[0]||(e[0]=w=>d(s.article))}),t(x,{width:"180px",color:"var(--primary-color)",text:"Удалить из корзины",variant:"text",density:"compact",onClick:e[1]||(e[1]=w=>a(s.article))})]),_:1})]),_:1})]),t(U,{thickness:"1",color:"var(--primary-color)"})]))}}),N=$(D,[["__scopeId","data-v-c1adaeb2"]]),O={key:1},E={name:"Cart"},T=Object.assign(E,{setup(s){const r=h(),c=f(()=>r.state.currentUser),m=f(()=>r.state.currentUser.cart.reduce((u,a)=>u+a.price,0));return(u,a)=>(n(),p(C,null,[c.value.cart.length?g("",!0):(n(),_(v,{key:0,style:{"text-align":"center","font-size":"1rem"}},{default:l(()=>[a[0]||(a[0]=o("p",null,"В корзине пока нет товаров",-1)),t(U,{thickness:"2",color:"var(--primary-color)"})]),_:1})),c.value.cart.length?(n(),p("div",O,[(n(!0),p(C,null,j(c.value.cart,d=>(n(),_(N,{key:d.article,article:d},null,8,["article"]))),128)),t(V,{variant:"text"},{default:l(()=>[t(v,{style:{display:"flex","justify-content":"space-between"}},{default:l(()=>[a[1]||(a[1]=o("span",{style:{opacity:"0.6"}},"Итого:",-1)),o("span",null,y(`${m.value} ₽`),1)]),_:1}),t(k,null,{default:l(()=>[t(x,{color:"var(--primary-color)",text:"Перейти к оформлению заказа",variant:"tonal",block:""})]),_:1})]),_:1})])):g("",!0)],64))}});export{T as default};
